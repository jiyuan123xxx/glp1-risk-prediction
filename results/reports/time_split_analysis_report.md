# 时间分割策略对GLP-1临床试验风险预测模型性能影响分析报告

**生成时间**: 2026-02-23  
**分析目标**: 评估按2021年分割训练集和测试集对模型性能的影响

## 📊 数据分布分析

### 总体数据概况
- **数据总数**: 30,105个临床试验
- **年份范围**: 1957年 - 2029年
- **年份中位数**: 2016年
- **年份均值**: 2015.7年

### 按2021年分割结果
- **2021年之前样本数**: 21,086个 (70.0%)
- **2021年及之后样本数**: 9,019个 (30.0%)

### 标签分布对比
| 数据集 | 低风险样本 | 高风险样本 | 高风险比例 |
|--------|------------|------------|------------|
| 总体数据 | 30,000 | 105 | 0.35% |
| 2021年之前 | 20,995 | 91 | 0.43% |
| 2021年及之后 | 9,005 | 14 | 0.16% |

**关键发现**: 2021年之后的数据中高风险样本比例更低(0.16%)，说明近期试验的风险特征可能发生了变化。

## 🤖 模型性能比较

### 两种分割策略性能对比
| 模型 | 准确率 | 精确率 | 召回率 | F1分数 | AUC |
|------|--------|--------|--------|--------|-----|
| 随机分割 | 0.7578 | 0.0062 | 0.4286 | 0.0122 | 0.6626 |
| 时间分割(2021) | 0.7200 | 0.0024 | 0.4286 | 0.0047 | 0.6348 |

### 性能变化分析
- **准确率**: 时间分割下降4.78个百分点
- **精确率**: 时间分割下降61.3%
- **召回率**: 两种方法相同(42.86%)
- **F1分数**: 时间分割下降61.5%
- **AUC**: 时间分割下降4.2%

## 🔍 深度分析

### 时间分割的优势
1. **现实性更强**: 使用历史数据预测未来，更符合实际应用场景
2. **避免数据泄露**: 防止未来信息泄露到训练集中
3. **时间趋势捕捉**: 能够反映临床试验风险特征的时间变化

### 时间分割的挑战
1. **类别不平衡加剧**: 测试集高风险比例更低(0.16% vs 0.43%)
2. **分布偏移**: 训练集和测试集的时间分布不同
3. **样本量减少**: 测试集样本量相对较少

### 性能下降原因分析
1. **分布差异**: 2021年前后的临床试验特征可能发生变化
2. **样本不平衡**: 测试集高风险样本更少，模型难以学习有效模式
3. **时间效应**: 新药研发环境、监管政策等因素随时间变化

## 💡 改进建议

### 短期优化策略
1. **调整阈值**: 针对时间分割后的数据分布重新优化分类阈值
2. **样本权重**: 根据时间远近调整样本权重，近期数据权重更高
3. **特征工程**: 增加时间相关特征，如"距离2021年的时间差"

### 中期改进方案
1. **滑动窗口**: 采用滑动时间窗口策略，逐步更新模型
2. **集成学习**: 结合多个时间段的模型进行集成预测
3. **迁移学习**: 使用历史数据预训练，在新数据上微调

### 长期发展方向
1. **在线学习**: 实现模型的持续学习和更新
2. **多时间尺度**: 结合不同时间尺度的预测模型
3. **外部数据**: 集成监管政策、市场环境等外部时间序列数据

## 📈 结论

按2021年进行时间分割虽然降低了模型的部分性能指标，但这种分割方式更符合现实世界的预测需求。性能下降主要源于：

1. **测试集高风险样本比例更低** (0.16% vs 0.43%)
2. **时间分布差异**导致的特征分布偏移
3. **样本量限制**对模型学习的影响

**建议**: 在追求模型现实性的前提下，可以接受一定的性能下降，但需要通过阈值优化、特征工程等方法进行补偿。时间分割策略为模型的长期应用提供了更可靠的基础。

---

*注：本分析基于逻辑回归模型，其他算法可能表现出不同的时间敏感性。*